<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
<meta charset="ISO-8859-1">
<title>Watchlist and Portfolio</title>
</head>
<body>

<h1><span sec:authentication="principal.fullName">Full Name</span>'s Portfolio and Watchlist Page</h1>

<div>
	<h2>Portfolio</h2>
	<div>
		<table>
			<tr>
				<th>Company Name</th>
				<th>Company Symbol</th>
			</tr>
			<tr th:each="portentry: ${portfolio}">
				<td th:text="${portentry.companyName}">Company</td>
				<td th:text="${portentry.companySymbol}">Symbol</td>
				
			</tr>
		
		</table>
	
	</div>
</div>
<div>
	<h2>Watchlist</h2>
	<div>
		<table>
			<tr>
				<th>Company Name</th>
				<th>Company Symbol</th>
			</tr>
			<tr th:each="watchentry: ${watchlist}">
				<td th:text="${watchentry.companyName}">Company</td>
				<td th:text="${watchentry.companySymbol}">Symbol</td>
			</tr>
		
		</table>
	
	</div>
</div>
<div>
	<h2>All Available Companies</h2>
	<div>
		<table>
			<tr>
				<th>Company Name</th>
				<th>Company Symbol</th>
				<th>Add to Watchlist</th>
				<th>Add to Portfolio</th>
			</tr>
			<tr th:each="company: ${allCompanies}">
				<td th:text="${company.companyName}">Company</td>
				<td th:text="${company.companySymbol}">Symbol</td>
				<td>
					<!-- th:action -> defines controller we are going for. method="post" states that we are sending info to server -->
					<form th:action="@{/addToWatchlist}" method="post">
						<!-- type="hidden" means we do not see this, something is being inputted behind the scenes.
							 th:value="..." is the info we are inputting/sending to server, ie the company id. name="..." is the name of the param we are 
							 sending to server, ie the name by which we access it in the controller. The button 'executes' the form -->
						<input type="hidden" th:value="${company.Company_ID}" name="Company_ID">
						<button type="submit">W</button>
					</form>
					
					<!-- -------------A BIT OF PLAYING AROUND----------------- -->
					<!-- 
					<form th:action="@{/addToWatchlist}" method="post">
						<input type="hidden" th:value="${company}" name="Company_ID">
						<button type="submit">W</button>
					</form>
					
					Sends the company to the controller - however gets a conversion error, as we cannot convert from the string that the company is represented from 
					to a object of type Company. Hence we use id. Saw something about either creating a converter or using the repo, so maybe adding queries to the repo will answer
					 -->
					<!-- ------------------------------------------------- -->
				</td>
				<td> <input type="submit" value="P"> </td>
			</tr>
		
		</table>
	
	</div>
</div>

<br>

<div style="font-style:italic;">
	<p>Don't see a company you need? Click the button below and submit a request to have the company added.
	(Button has no function. Ability to request new companies is to be implemented in a later version)</p>
	<form action="#">
		<input type="submit" value="Request new company">		
	</form>
	
</div>

<br>

<div>
	<form action="/users">
		<input type="submit" value="Return to main page">		
	</form>

</div>


</body>
</html>